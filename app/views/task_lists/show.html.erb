<h1><%= @task_list.title %></h1>

<p><%= @task_list.description %></p>

<h2>Tarefas - <%= @task_list.tasks.count %></h2>

<% if @task_list.tasks.any? %>
  <ul>
    <% @task_list.tasks.each do |task| %>
      <li>
        <%= task.description %> - <%= task.completed ? "Feita" : "A Fazer" %>
        
        <%= link_to "Editar", edit_task_list_task_path(@task_list, task) %>
        
        <%= form_with(url: task_list_task_path(@task_list, task), method: :delete, local: true, style: "display: inline;") do %>
          <%= button_tag "Excluir", 
                type: "submit",
                onclick: "return confirm('Excluir esta tarefa?');",
                style: "border: none; background: none; color: red; text-decoration: underline; cursor: pointer; padding: 0; margin-left: 10px;" %>
        <% end %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>Nenhuma tarefa nesta lista ainda.</p>
<% end %>

<h3>Adicionar Nova Tarefa</h3>
<%= form_with(model: [@task_list, @task_list.tasks.new], local: true) do |form| %>
  <%= form.text_field :description, placeholder: "DescriÃ§Ã£o da tarefa", required: true %>
  <%= form.submit "Adicionar Tarefa" %>
<% end %>

<br>
<%= link_to "Voltar", task_lists_path %> | 
<%= link_to "Editar Lista", edit_task_list_path(@task_list) %>